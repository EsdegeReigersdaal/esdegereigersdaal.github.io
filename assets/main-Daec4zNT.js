const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/model-DwmDlixD.js","assets/likec4-DsKTg5QM.js","assets/icons-BG7jhnKJ.js","assets/puml-CC0YRZHH.js","assets/e-DmkelDom.js","assets/i-DIbbg_lV.js","assets/o-BkXc4xk3.js","assets/mmd-CbZdJn7r.js","assets/dot-BZ0cROQk.js","assets/d2-DIrlb8bs.js"])))=>i.map(i=>d[i]);
import{j as e,r as x,c as Bt}from"./likec4-DsKTg5QM.js";import{r as T,c as Ht,s as Ot,e as xe,O as Y,u as re,a as f,b as ke,C as D,S as z,T as I,B as v,L as R,E as Qe,N as fe,d as Wt,f as Ut,g as Gt,h as Be,i as w,G as $,j as Xe,n as J,k as N,o as qt,l as Kt,m as Yt,p as Jt,q as Qt,P as Xt,D as Zt,t as eo,v as Pe,w as to,M as Ze,x as et,y as tt,z as oo,A as V,F as ot,H as q,I as k,J as Ce,K as se,Q as _,R as E,U as ie,V as ae,W as no,X as ro,Y as so,Z as io,_ as Se,$ as Ve,a0 as nt,a1 as ao,a2 as lo,a3 as rt,a4 as le,a5 as co,a6 as uo,a7 as ho,a8 as po,a9 as mo,aa as go,ab as He,ac as Oe,ad as xo,ae as H,af as jo,ag as Te,ah as wo,ai as fo,aj as vo,ak as oe,al as bo,am as yo,an as Io,ao as U,ap as Ro,aq as G,ar as We,as as $o,at as ko,au as Po,av as Ue,aw as st,ax as Co,ay as So,az as Vo,aA as To,aB as Eo,aC as Lo,aD as Do,aE as _o,aF as zo,aG as No,aH as Ge,aI as it,aJ as ve,aK as Mo,aL as Ao}from"./e-DmkelDom.js";import{c as b,u as Q,S as Ee,M as Fo,R as Bo,B as Le,I as Ho,a as at,b as De,L as Oo,d as Wo,e as Uo,f as Go,g as qo,h as Ko,i as lt,j as qe,k as dt,l as _e,m as ct,n as ut,o as Yo,p as Jo,t as Ke,s as be,q as Qo,r as je,v as Xo,w as ht,x as pt,y as Zo,z as en,A as tn,C as on,D as nn,E as rn,F as sn,G as an,H as ln}from"./i-DIbbg_lV.js";import{C as ne,p as ze,k as dn,a as cn,b as un}from"./o-BkXc4xk3.js";const hn="modulepreload",pn=function(t){return"/"+t},Ye={},M=function(o,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=h(n.map(p=>{if(p=pn(p),p in Ye)return;Ye[p]=!0;const d=p.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const j=document.createElement("link");if(j.rel=d?"stylesheet":hn,d||(j.as="script"),j.crossOrigin="",j.href=p,c&&j.setAttribute("nonce",c),document.head.appendChild(j),d)return new Promise((P,C)=>{j.addEventListener("load",P),j.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return o().catch(s)})},ye=[{id:"default",title:"default"}];let mn={default:()=>M(()=>import("./model-DwmDlixD.js"),__vite__mapDeps([0,1]))};async function mt(t){const o=mn[t];if(!o)throw new Error("Unknown projectId: "+t);return await o()}function Ne({error:t,resetErrorBoundary:o}){const n=N();return ot(t)?e.jsx(D,{my:"md",children:e.jsxs(q,{variant:"light",color:"orange",children:[e.jsxs(I,{c:"orange",fz:"md",children:["The diagram"," ",e.jsx(k,{color:"orange"})," ","does not exist or contains errors"]}),e.jsx(v,{onClick:()=>{o(),n.navigate({to:"/"})},variant:"light",color:"orange",mt:"lg",size:"xs",children:"Go to overview"})]})}):e.jsx(D,{my:"md",children:e.jsxs(q,{variant:"filled",color:"red",title:"Something went wrong",children:[e.jsx(k,{block:!0,color:"red",children:t.stack??t.message}),e.jsxs($,{mt:"lg",children:[e.jsx(v,{onClick:o,color:"red",variant:"white",size:"xs",children:"Try again"}),e.jsx(v,{onClick:()=>n.navigate({to:"/"}),color:"red",size:"xs",children:"Go to overview"})]})]})})}const gn=b({paddingTop:"[120px]",position:"relative",zIndex:"1",sm:{paddingTop:"[220px]"}}),xn=b({position:"absolute",inset:"0",opacity:.2}),jn=b({position:"relative"}),wn=b({paddingTop:"[80px]",paddingBottom:"[80px]"}),fn=b({maxWidth:T(540),margin:"auto",marginTop:"xl",marginBottom:"[calc({spacing.xl}*1.5)]"}),vn=b({textAlign:"center",fontWeight:"900",fontSize:T(38)});function Me(){return e.jsx(D,{className:wn,children:e.jsxs("div",{className:jn,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 362 145",className:xn,children:e.jsx("path",{fill:"currentColor",d:"M62.6 142c-2.133 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2L58.2 4c.8-1.333 2.067-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .667.533 1 1.267 1 2.2v21.2c0 .933-.333 1.733-1 2.4-.667.533-1.467.8-2.4.8H93v20.8c0 2.133-1.067 3.2-3.2 3.2H62.6zM33 90.4h26.4V51.2L33 90.4zM181.67 144.6c-7.333 0-14.333-1.333-21-4-6.666-2.667-12.866-6.733-18.6-12.2-5.733-5.467-10.266-13-13.6-22.6-3.333-9.6-5-20.667-5-33.2 0-12.533 1.667-23.6 5-33.2 3.334-9.6 7.867-17.133 13.6-22.6 5.734-5.467 11.934-9.533 18.6-12.2 6.667-2.8 13.667-4.2 21-4.2 7.467 0 14.534 1.4 21.2 4.2 6.667 2.667 12.8 6.733 18.4 12.2 5.734 5.467 10.267 13 13.6 22.6 3.334 9.6 5 20.667 5 33.2 0 12.533-1.666 23.6-5 33.2-3.333 9.6-7.866 17.133-13.6 22.6-5.6 5.467-11.733 9.533-18.4 12.2-6.666 2.667-13.733 4-21.2 4zm0-31c9.067 0 15.6-3.733 19.6-11.2 4.134-7.6 6.2-17.533 6.2-29.8s-2.066-22.2-6.2-29.8c-4.133-7.6-10.666-11.4-19.6-11.4-8.933 0-15.466 3.8-19.6 11.4-4 7.6-6 17.533-6 29.8s2 22.2 6 29.8c4.134 7.467 10.667 11.2 19.6 11.2zM316.116 142c-2.134 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2l56.6-84.6c.8-1.333 2.066-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .666.533 1 1.267 1 2.2v21.2c0 .933-.334 1.733-1 2.4-.667.533-1.467.8-2.4.8h-11.2v20.8c0 2.133-1.067 3.2-3.2 3.2h-27.2zm-29.6-51.6h26.4V51.2l-26.4 39.2z"})}),e.jsxs("div",{className:gn,children:[e.jsx(Xe,{className:vn,children:"Nothing to see here"}),e.jsx(I,{c:"dimmed",size:"lg",ta:"center",className:fn,children:"Page you are trying to open does not exist. You may have mistyped the address, or the page has been moved to another URL. If you think this is an error contact support."}),e.jsx($,{justify:"center",children:e.jsx(v,{component:R,to:"/",search:!0,size:"md",children:"Take me back to home page"})})]})]})})}function bn({children:t}){const o=Se(),n=Ve(r=>{o({to:"/project/$projectId/",params:{projectId:r}}).catch(console.error)});return e.jsx(Oo,{projects:ye,onProjectChange:n,children:t})}const yn=t=>{if(typeof t!="string")return"auto";const o=t.toLowerCase();return o==="light"||o==="dark"?o:"auto"},In=t=>{switch(!0){case typeof t=="number":return Math.round(t);case typeof t=="string":return Math.round(parseFloat(t))}return 20},Rn=t=>{if(typeof t!="string")return"diagram";const o=t.toLowerCase();return o==="diagram"||o==="sequence"?o:"diagram"},O=Ht()({component:$n,validateSearch:t=>({...xe(t.padding)&&{padding:In(t.padding)},...xe(t.theme)&&{theme:yn(t.theme)},...xe(t.dynamic)&&{dynamic:Rn(t.dynamic)}}),search:{middlewares:[Ot({padding:20,theme:"auto",dynamic:"diagram"})]}});function $n(){return e.jsxs(bn,{children:[e.jsx(Y,{}),e.jsx(kn,{})]})}const kn=()=>{const{theme:t}=O.useSearch(),o=re();return x.useEffect(()=>{t&&o.setColorScheme(t)},[t]),null},Pn=f("/projects")({component:Cn});function Cn(){const t=Q();return ke(`Projects - ${ze}`),e.jsx(D,{size:"xs",py:"lg",children:e.jsxs(z,{children:[e.jsx(I,{fz:"lg",children:"Select a project"}),t.map(o=>e.jsx(v,{variant:"default",size:"lg",fw:400,renderRoot:n=>e.jsx(R,{...n,to:"/project/$projectId/",params:{projectId:o.id}}),styles:{inner:{justifyContent:"flex-start"}},children:o.title??o.id},o.id))]})})}const Sn=x.lazy(async()=>{const{ProjectIcons:t}=await M(async()=>{const{ProjectIcons:o}=await import("./icons-BG7jhnKJ.js");return{ProjectIcons:o}},__vite__mapDeps([2,1]));return{default:t}}),Vn=t=>e.jsx(x.Suspense,{fallback:e.jsx(Do,{className:"pending",type:"oval",size:"xs"}),children:e.jsx(Sn,{...t})});let Tn={};function gt({children:t,projectId:o}){const n=Tn[o]??=r=>e.jsx(Vn,{...r,projectId:o});return e.jsx(Wo,{value:n,children:t})}const xt=x.createContext(null),En=xt.Provider,Ln=()=>{const t=x.useContext(xt);if(t===null)throw new Error("LikeC4ModelDataAtom is not provided");return t};function jt({likec4data:t,likec4model:o,children:n}){const r=nt(o);return e.jsx(En,{value:t,children:e.jsx(Uo,{likec4model:r,children:n})})}b({position:"absolute",inset:"0",zIndex:1});const de=b({minWidth:300,"& svg":{width:"100%",height:"auto"}}),Dn={var:"--header-height"},ce=b({padding:"0",margin:"0",width:"100%",height:"100%",[Dn.var]:"60px","--likec4-options-panel-top":"60px","--likec4-options-panel-right":"10px"});b({boxSizing:"border-box",border:"0px solid transparent",padding:"0",margin:"0",marginRight:"auto",marginBottom:"auto",background:"transparent"});const wt=f("/_single")({staleTime:1/0,loader:async({context:t})=>{const o=t.projectId,{$likec4data:n,$likec4model:r}=await mt(o);return{$likec4data:n,$likec4model:r,projectId:o}},component:_n});function _n(){const{$likec4data:t,$likec4model:o,projectId:n}=wt.useLoaderData();return e.jsx("div",{className:ce,children:e.jsx(Qe,{FallbackComponent:Ne,children:e.jsx(gt,{projectId:n,children:e.jsx(jt,{likec4data:t,likec4model:o,children:e.jsx(Y,{})})})})})}const zn=f("/")({component:()=>Q().length>1?e.jsx(fe,{to:"/projects/",replace:!0}):e.jsx(fe,{to:"/single-index/",mask:{to:"/",unmaskOnReload:!0}})});function ft(t=!0){So(()=>{const o=document.body.parentElement;if(!o||t!==!0)return;const n="transparent-bg";return o.classList.add(n),()=>{o.classList.remove(n)}},[t])}function Ae(){const t=Ln(),[o,n]=x.useState([]);return x.useEffect(()=>t.subscribe(r=>{n(i=>{const s=ao(r.views);return lo(i,s)?i:s})}),[t]),o}function vt(){return Pe({select:t=>t.viewId??"index",strict:!1})}function W(){const t=vt();return Ae().find(o=>o.id===t)??null}function Nn(){const t=Q(),o=Pe({select:n=>n.projectId,strict:!1});return t.find(n=>n.id===o)??t[0]}b({color:"mantine.colors.dimmed"});b({});const Mn=b({position:"relative",overflow:"hidden",padding:"0",margin:"0",backgroundOrigin:"padding-box",backgroundImage:"radial-gradient({colors.mantine.colors.defaultBorder} 15%, {colors.mantine.colors.body} 15%)",backgroundPosition:"0 0",backgroundSize:"12px 12px",_after:{content:'" "',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1"}}),An=b({position:"absolute",inset:"0",zIndex:5}),Fn=f("/_single/single-index")({component:Bn});function Bn(){ke(ze);const t=Ae();return e.jsx(D,{size:"xl",children:e.jsx(Wt,{p:{base:"md",sm:"xl"},cols:{base:1,sm:2,md:3,xl:4},spacing:{base:10,sm:"xl"},verticalSpacing:{base:"md",sm:"xl"},children:t.map(o=>e.jsx(Hn,{view:o},o.id))})})}function Hn({view:t}){const[o,n]=x.useState(!1),{ref:r,inViewport:i}=Ut();return x.useEffect(()=>{if(!i||o)return;const s=setTimeout(()=>n(!0),Gt(30,80));return()=>clearTimeout(s)},[i]),e.jsxs(Be,{ref:r,shadow:"xs",padding:"lg",radius:"sm",className:"group",withBorder:!0,children:[e.jsx(Be.Section,{children:e.jsx(w,{className:Mn,style:{height:200},children:o&&e.jsx(Ee,{background:"transparent",view:t,fitView:!0,fitViewPadding:"4px",reduceGraphics:!0})})}),e.jsx($,{justify:"space-between",mt:"md",children:e.jsx(I,{fw:500,children:t.title??t.id})}),e.jsx(Fo,{value:Bo.from(t.description),textScale:.75,emptyText:"No description",lineClamp:3,mt:"[2px]",css:{transition:"fast",opacity:{base:.8,_groupHover:1}}}),e.jsx(R,{to:"/view/$viewId/",params:{viewId:t.id},search:!0,className:An})]})}const bt=f("/project/$projectId")({staleTime:1/0,beforeLoad:({params:t})=>({projectId:t.projectId}),loader:async({context:t})=>{const o=t.projectId;try{const{$likec4data:n,$likec4model:r}=await mt(o);return{$likec4data:n,$likec4model:r,projectId:o}}catch(n){throw console.error(n),J()}},component:On,notFoundComponent:()=>e.jsx("div",{className:ce,children:e.jsx(D,{py:"xl",children:e.jsxs(z,{align:"flex-start",children:[e.jsx(Xe,{children:"Project not found"}),e.jsx(v,{component:R,to:"/",search:!0,size:"md",children:"Open overview"})]})})})});function On(){const{$likec4data:t,$likec4model:o,projectId:n}=bt.useLoaderData();return e.jsx("div",{className:ce,children:e.jsx(Qe,{FallbackComponent:Ne,children:e.jsx(gt,{projectId:n,children:e.jsx(jt,{likec4data:t,likec4model:o,children:e.jsx(Y,{})})})})})}const yt=f("/project/$projectId/")({component:()=>{const{projectId:t}=yt.useParams();return e.jsx(fe,{to:"/project/$projectId/view/$viewId/",replace:!0,params:{projectId:t,viewId:"index"}})}}),It=f("/_single/webcomponent/$")({component:Wn});function Wn(){const t=N(),o=It.useParams()._splat||"index",{colorScheme:n}=re();let r=t.basepath.endsWith("/")?t.basepath:`${t.basepath}/`;const i=new URL(`${r}likec4-views.js`,window.location.href),s=`
    <!DOCTYPE html>
    <html lang="en-US" style="color-scheme: ${n};">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no" />
      <style>
        * {
          border-width: 0px;
          border-style: solid;
          box-sizing: border-box;
          overflow-wrap: break-word;
        }
        html, body {
          margin: 0;
          background-color: transparent !important;
          width: 100%;
          height: 100%;
          font-size: 16px;
        }
        body {
          min-height: 100%;
        }
      </style>
    </head>
    <body>      
      <div style="width: 100%; height: 100%; padding: clamp(0.5rem, 5vh, 4rem) clamp(0.5rem, 5vw, 5rem)">
        <${ne.View} view-id="${encodeURIComponent(o)}"></${ne.View}>
      </div>
      <script type="module" src="${i.href}"><\/script>
    </body>
    </html>
  `;return e.jsx(Le,{css:{position:"fixed",inset:"0",width:"100%",height:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%",borderStyle:"none",backgroundColor:"transparent",overflow:"hidden"}},children:e.jsx("iframe",{srcDoc:s,allowtransparency:"true"})})}const Rt=t=>"type"in t&&["file","folder","view","deployment-view"].includes(t.type);function Un(t){return t===""?"":t.split("/").slice(0,-1).join("/")}function Je(t,o){return t.children.length===0&&o.children.length>0?1:t.children.length>0&&o.children.length===0?-1:ln(t.label,o.label)}function Gn(t,o){const n={value:"",label:"Diagrams",type:"folder",children:[]},r=i=>{let s=n;if(i==="")return s;const a=i.split("/"),c=["@fs"];for(;a.length;){const h=a.shift();c.push(h);const p=c.join("/");let d=st(s.children,m=>m.value===p);d||(d={label:h,value:p,type:"folder",children:[]},s.children.push(d)),s=d}return s};for(const i of t){let s;switch(o){case"by-files":s=i.$view.sourcePath??"";break;case"by-folders":s=Un(i.$view.sourcePath??"");break;case"none":s="";break;default:nn(o)}const a=r(s);a.children.push({value:i.id,label:i.title??i.id,type:i.isDeploymentView()?"deployment-view":"view",children:[]}),a!==n&&(a.children.sort(Je),o==="by-files"&&a.type!=="file"&&(a.type="file"))}return n.children.sort(Je)}function qn(t="by-files"){const o=ct();return x.useMemo(()=>Gn([...o.views()],t),[o,t])}const Kn=t=>Rt(t)&&t.type==="file",Yn=({node:t,expanded:o})=>Kn(t)?e.jsx(Ge,{size:"sm",variant:"transparent",color:"indigo",children:e.jsx(en,{size:16})}):e.jsx(Ge,{size:"sm",variant:"transparent",color:"violet",children:o?e.jsx(tn,{size:16}):e.jsx(on,{size:16})}),Jn=()=>{},Qn=x.memo(({groupBy:t})=>{const o=Ae(),n=qn(t),r=Se(),i=d=>{r({to:"./",viewTransition:!1,params:m=>({...m,viewId:d})})},s=W(),a=s?.id??null,c=yo({multiple:!1});c.setHoveredNode=Jn;const h=s?.sourcePath??null;De(()=>{c.collapseAllNodes()},[t]),x.useEffect(()=>{if(h){const d=h.split("/");let m="@fs";for(const j of d)m+=`/${j}`,c.expand(m)}},[h,t]),x.useEffect(()=>{a&&c.select(a)},[a]);const p=rt();return e.jsx(Le,{children:e.jsx(Io,{allowRangeSelection:!1,tree:c,data:n,styles:{node:{marginTop:2,marginBottom:2}},levelOffset:"md",renderNode:({node:d,selected:m,expanded:j,elementProps:P,hasChildren:C})=>e.jsx(Xn,{diagram:C?void 0:o.find(l=>l.id===d.value),children:e.jsx(v,{fullWidth:!0,color:p==="light"?"dark":"gray",variant:m?"transparent":"subtle",size:"sm",fz:"sm",fw:C?"600":"500",justify:"flex-start",styles:{section:{opacity:.5}},leftSection:e.jsxs(e.Fragment,{children:[!C&&d.value==="index"&&e.jsx(lt,{size:14,opacity:.7}),!C&&d.value!=="index"&&Rt(d)&&e.jsxs(e.Fragment,{children:[d.type==="deployment-view"&&e.jsx(Yo,{size:14}),d.type==="view"&&e.jsx(Jo,{size:14})]}),C&&e.jsx(Yn,{node:d,expanded:j})]}),...P,...!C&&{onClick:l=>{l.stopPropagation(),i(d.value)}},children:d.label})})})})},(t,o)=>t.groupBy===o.groupBy);function Xn({diagram:t,children:o}){const n=t?Math.max(t.bounds.width/400,t.bounds.height/300):1,r=t?Math.round(t.bounds.width/n):0,i=t?Math.round(t.bounds.height/n):0;return e.jsxs(e.Fragment,{children:[t&&e.jsxs(_o,{position:"right-start",openDelay:400,closeDelay:100,keepMounted:!1,shadow:"lg",children:[e.jsx(zo,{children:o}),e.jsx(No,{style:{width:r,height:i},p:"xs",children:e.jsx(Zn,{diagram:t})})]}),!t&&o]})}const Zn=x.memo(({diagram:t})=>{const o=Math.max(t.bounds.width/400,t.bounds.height/300),n=Math.round(t.bounds.width/o),r=Math.round(t.bounds.height/o);return e.jsx(Ee,{view:t,fitView:!0,fitViewPadding:"4px",enableElementDetails:!1,reduceGraphics:!0,initialWidth:n,initialHeight:r})},(t,o)=>t.diagram.id===o.diagram.id),K=no(!1);qt(K,()=>{K.set(!1)});const er=()=>nt(K),X={open:()=>K.set(!0),close:()=>K.set(!1)};function $t(){const t=er(),[o,n]=xo({key:"sidebar-drawer-grouping",defaultValue:"by-files"});return e.jsxs(H.Root,{keepMounted:!0,opened:t,scrollAreaComponent:E.Autosize,onClose:X.close,children:[e.jsx(H.Overlay,{blur:2}),e.jsxs(H.Content,{children:[e.jsxs(H.Header,{children:[e.jsxs($,{gap:"xs",children:[e.jsx(v,{component:R,to:"/",leftSection:e.jsx(Ko,{size:14}),color:"dimmed",variant:"subtle",px:T(5),styles:{section:{marginInlineEnd:4}},size:"xs",children:"Overview"}),e.jsx(jo,{size:"xs",withItemsBorders:!1,value:o,onChange:n,data:[{label:"By files",value:"by-files"},{label:"By folders",value:"by-folders"},{label:"List",value:"none"}]}),e.jsx(v,{leftSection:e.jsx(lt,{size:12,stroke:2}),color:"dimmed",variant:"subtle",px:T(5),styles:{section:{marginInlineEnd:4}},size:"xs",renderRoot:r=>e.jsx(R,{to:"/view/$viewId",params:{viewId:"index"},...r}),children:"Open index"})]}),e.jsx(H.CloseButton,{})]}),e.jsx(H.Body,{children:e.jsx(Qn,{groupBy:o})})]})]})}function tr(){const{setColorScheme:t}=re({keepTransitions:!0}),o=rt("light");return e.jsx(le,{visibleFrom:"sm",size:"md",variant:"subtle",color:"gray",onClick:()=>t(o==="light"?"dark":"light"),"aria-label":"Toggle color scheme",children:o==="light"?e.jsx(Go,{stroke:1.5}):e.jsx(qo,{stroke:1.5})})}const or=b({position:"absolute",backgroundColor:"mantine.colors.body/80",_dark:{backgroundColor:"mantine.colors.dark[6]/60"},'#likec4-root:has([data-likec4-diagram-panning="true"]) &':{boxShadow:"none",borderRadius:"0px",backgroundColor:"mantine.colors.body"}});function nr(){const t=Q(),o=Nn();return t.length<2?null:e.jsxs(Ze,{shadow:"md",width:200,trigger:"click-hover",openDelay:200,children:[e.jsx(et,{children:e.jsx(v,{variant:"subtle",size:"sm",color:"gray",px:"sm",rightSection:e.jsx(at,{opacity:.5,size:14}),visibleFrom:"md",children:o.title??o.id})}),e.jsx(tt,{children:t.map(({id:n,title:r})=>e.jsx(V,{renderRoot:i=>e.jsx(R,{...i,to:"/project/$projectId/view/$viewId/",params:{projectId:n,viewId:"index"}}),children:r??n},n))})]})}const kt=()=>e.jsx(q,{color:"yellow",icon:e.jsx(Zo,{}),title:"Localhost URL",styles:{body:{gap:T(4)}},children:e.jsx(I,{c:"yellow",size:"sm",children:"You need to deploy your project to make it available on the internet"})}),Ie=({copied:t,copy:o})=>e.jsx(v,{size:"xs",color:t?"teal":"gray",variant:"light",leftSection:t?e.jsx(ht,{style:{width:T(16)}}):e.jsx(pt,{style:{width:T(16)}}),onClick:o,children:t?"Copied":"Copy to clipboard"}),rr=({diagram:t})=>{const o=N(),{colorScheme:n}=re(),[r,i]=x.useState(n),s=20;let a=o.buildLocation({to:"/embed/$viewId",params:{viewId:t.id},search:{padding:s,theme:r!=="auto"?r:void 0}}).href;a=a;const c=new URL(a,window.location.href),h=t.bounds.width+s*2,p=t.bounds.height+s*2,d=c.href,m=`
<div style="aspect-ratio:${h}/${p};width:100%;height:auto;max-width:${h}px;margin:0 auto">
  <iframe src="${d}" width="100%" height="100%" style="border:0;background:transparent;"></iframe>
</div>
`.trim();return e.jsxs(z,{children:[m.includes("http://localhost")&&e.jsx(kt,{}),e.jsx(w,{children:e.jsx(I,{size:"sm",children:"Embedded view is an iframe with a static diagram"})}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"HTML"})}),e.jsxs($,{gap:"xs",children:[e.jsx(le,{component:"a",href:d,target:"_blank",variant:"light",color:"gray",children:e.jsx(ut,{})}),e.jsx(oe,{value:m,timeout:1500,children:Ie})]})]}),e.jsx(k,{block:!0,children:m}),e.jsx(w,{style:{alignSelf:"flex-start"},children:e.jsx(bo,{label:"Color scheme",value:r,allowDeselect:!1,onChange:j=>i(j??"auto"),data:[{value:"auto",label:"Auto"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}]})})]})]})};function sr({diagram:t}){const o=N();let n=o.basepath.endsWith("/")?o.basepath:`${o.basepath}/`;const r=`
  <script module src="${new URL(`${n}likec4-views.js`,window.location.href).href}"><\/script>
`.trim(),i=`
<${ne.View}
   view-id="${encodeURIComponent(t.id)}"
   browser="true"
   dynamic-variant="sequence">
</${ne.View}>
`.trim(),s=o.buildLocation({to:"/webcomponent/$",params:{_splat:t.id},search:!0});return e.jsxs(z,{children:[r.includes("http://localhost")&&e.jsx(kt,{}),e.jsx(w,{children:e.jsx(I,{size:"sm",children:"Add this script to your page:"})}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"JavaScript"})}),e.jsxs($,{gap:"xs",children:[e.jsx(le,{component:"a",href:s.href,target:"_blank",variant:"light",color:"gray",children:e.jsx(ut,{})}),e.jsx(oe,{value:r,timeout:1500,children:Ie})]})]}),e.jsx(k,{block:!0,children:r}),e.jsx(w,{children:e.jsxs(I,{size:"sm",c:"dimmed",children:["This script defines a custom element (webcomponent) that renders your diagrams.",e.jsx("br",{}),"Script must be inserted once in the ",e.jsx("code",{children:"<head>"})," or at the end of the ",e.jsx("code",{children:"<body>"})," ","tag."]})})]}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"HTML"})}),e.jsx(w,{children:e.jsx(oe,{value:i,timeout:1500,children:Ie})})]}),e.jsx(k,{block:!0,children:i}),e.jsx(w,{children:e.jsxs(I,{size:"sm",c:"dimmed",children:["Insert this code to your page. Page may have multiple ",e.jsx("code",{children:"<likec4-view>"}),"."]})})]})]})}function ir({onClose:t}){const o=W(),[n,r]=x.useState("webcomponent");return o?e.jsxs(co,{size:"xl",opened:!0,onClose:t,children:[e.jsx(uo,{backgroundOpacity:.5,blur:3}),e.jsx(ho,{children:e.jsxs(po,{children:[e.jsxs(mo,{value:n,onChange:i=>r(i??"webcomponent"),children:[e.jsxs(go,{children:[e.jsx(He,{value:"webcomponent",children:"Webcomponent"}),e.jsx(He,{value:"embed",children:"Embedded"})]}),e.jsx(Oe,{value:"embed",pt:"md",children:e.jsx(rr,{diagram:o})}),e.jsx(Oe,{value:"webcomponent",pt:"md",children:e.jsx(sr,{diagram:o})})]}),e.jsx($,{justify:"flex-end",mt:"lg",children:e.jsx(v,{size:"sm",onClick:t,children:"Close"})})]})})]}):null}const Pt=x.memo(()=>{const t=Q(),o=Kt({select(c){return c.some(({routeId:h})=>h==="/_single/view/$viewId/"||h==="/_single/view/$viewId/editor"||h==="/project/$projectId/view/$viewId")}}),{breakpoints:n}=Yt(),r=Jt(`(min-width: ${n.md})`)??!1,[i,{open:s,close:a}]=Qt(!1);return e.jsxs(Xt,{className:or,top:"0.5rem",right:"0.5rem",p:4,radius:"sm",shadow:"lg",children:[e.jsxs($,{gap:r?6:4,wrap:"nowrap",children:[o?e.jsxs(e.Fragment,{children:[e.jsx(nr,{}),t.length<=1&&e.jsx(v,{size:r?"sm":"xs",leftSection:e.jsx(Ho,{size:14}),onClick:s,children:"Share"}),e.jsx(ar,{})]}):e.jsx(v,{component:R,to:"/view/$viewId/",size:r?"sm":"xs",variant:"subtle",color:"gray",children:"Back to diagram"}),e.jsx(Zt,{orientation:"vertical",visibleFrom:"md"}),e.jsx(tr,{}),e.jsx(eo,{})]}),i&&e.jsx(ir,{onClose:a})]})});function ar(){const t=Pe({strict:!1}),o=to().some(r=>r.routeId==="/project/$projectId"),n=vt();return e.jsxs(Ze,{shadow:"md",width:200,trigger:"click-hover",openDelay:200,children:[e.jsx(et,{children:e.jsx(v,{variant:"subtle",size:"sm",color:"gray",px:"sm",rightSection:e.jsx(at,{opacity:.5,size:14}),visibleFrom:"md",children:"Export"})}),e.jsxs(tt,{children:[e.jsx(oo,{children:"Current view"}),e.jsx(V,{renderRoot:r=>e.jsx(R,{target:"_blank",to:o?"/project/$projectId/export/$viewId/":"/export/$viewId/",search:{download:!0},params:!0,...r}),children:"Export as .png"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/dot",search:!0,params:!0,...r}),children:"Export as .dot"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/d2",search:!0,params:t,...r}),children:"Export as .d2"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/mmd",search:!0,params:{viewId:n},...r}),children:"Export as .mmd"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/puml",search:!0,params:{viewId:n},...r}),children:"Export as .puml"}),e.jsx(V,{disabled:!0,children:"Export to Draw.io"}),e.jsx(V,{disabled:!0,children:"Export to Miro"}),e.jsx(V,{disabled:!0,children:"Export to Notion"})]})]})}const Ct=f("/_single/view/$viewId")({component:dr,errorComponent:({error:t,reset:o})=>e.jsx(lr,{error:t,resetErrorBoundary:o})});function lr({error:t,resetErrorBoundary:o}){const n=N(),{viewId:r}=Ct.useParams();return De(()=>{o()},[r]),ot(t)?e.jsx(D,{my:"md",children:e.jsxs(q,{variant:"light",color:"orange",children:[e.jsxs(I,{c:"orange",fz:"md",children:["The diagram"," ",e.jsx(k,{color:"orange",children:r})," ","does not exist or contains errors"]}),e.jsx(v,{onClick:()=>{o(),n.navigate({to:"/",search:!0})},variant:"light",color:"orange",mt:"lg",size:"xs",children:"Go to overview"})]})}):e.jsx(D,{my:"md",children:e.jsxs(q,{variant:"filled",color:"red",title:"Something went wrong",children:[e.jsx(k,{block:!0,color:"red",children:t.stack??t.message}),e.jsx(v,{onClick:o,color:"red",variant:"white",mt:"lg",size:"xs",children:"Try again"})]})})}function dr(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(Pt,{}),e.jsx($t,{})]})}const S={dagre:{ranksep:60,nodesep:35,edgesep:25},edgeLabel:{width:120,height:10,minlen:1,weight:1},nodeWidth:340,nodeHeight:190,compound:{labelHeight:2,paddingTop:50,paddingBottom:32}};function cr(){const t=new it.graphlib.Graph({directed:!0,compound:!0,multigraph:!0});return t.setGraph({...S.dagre,rankdir:"LR"}),t.setDefaultEdgeLabel(()=>({...S.edgeLabel})),t.setDefaultNodeLabel(()=>({})),t}const Re="-port";function ur(t){const o=be([...t]),n=new Set(o),r=new Map(o.map(a=>[a.id,a])),i=new ve(()=>null),s=o.reduce((a,c,h,p)=>(a.set(c,p.slice(h+1).filter(rn(c)).map(d=>(n.delete(d),d)).reduce((d,m)=>(d.some(sn(m))||(d.push(m),i.set(m,c)),d),[])),a),new ve(()=>[]));return{sorted:o,byId:a=>an(r.get(a),`Element not found by id: ${a}`),root:n,parent:a=>i.get(a),children:a=>s.get(a)}}function we(t,o,n){const r=new ve(s=>({id:`${t}-${s}`,portId:`${t}-${s}`})),i=ur(o);for(const s of i.sorted){const a=i.children(s).length>0,c=s.id,h=`${t}-${c}`,p=a?`${h}${Re}`:h;r.set(c,{id:h,portId:p}),n.setNode(h,{element:s,isCompound:a,portId:p,inPorts:[],outPorts:[],width:S.nodeWidth,height:S.nodeHeight}),a&&(n.setNode(p,{element:s,portId:p,isCompound:a,inPorts:[],outPorts:[],width:S.nodeWidth-S.dagre.ranksep,height:S.compound.labelHeight}),n.setParent(p,h));const d=i.parent(s);d&&n.setParent(h,`${t}-${d.id}`)}return{...i,byId:s=>{const a=i.byId(s),c=r.get(a.id);return{element:a,graph:c}},graphNodes:r}}function hr(t){return it.layout(t,{}),o=>{const n=t.node(o),{x:r,y:i,width:s,height:a}=n;return{position:{x:r-Math.round(s/2),y:i-Math.round(a/2)},width:s,height:a}}}function pr(t){const o=cr(),n=we("in",t.incomers,o),r=we("subject",t.subjects,o),i=we("out",t.outgoers,o),s=[];U(ko(U(Ke(t.incoming),G(l=>({id:l.source.id,source:n.byId(l.source.id).graph,target:r.byId(l.target.id).graph,relation:l})),be),U(Ke(t.outgoing),G(l=>({id:l.target.id,source:r.byId(l.source.id).graph,target:i.byId(l.target.id).graph,relation:l})),be)),G(l=>({...l,expr:`${l.source.id}->${l.target.id}`})),$o(We("expr")),Ro(l=>{const u=l[0].source,g=l[0].target,y=l[0].expr;o.node(u.id).outPorts.push(g.id),o.node(g.id).inPorts.push(u.id),o.setEdge(u.portId,g.portId,{...S.edgeLabel},y),s.push({name:y,source:u.id,target:g.id,relations:G(l,We("relation"))})}));for(const l of r.graphNodes.values()){const u=l.id,g=o.node(u);if(g.isCompound)continue;const y=Math.max(o.inEdges(u)?.length??0,o.outEdges(u)?.length??0);y>2&&(g.height=g.height+(y-3)*14)}const a=hr(o),c=[...n.graphNodes.values(),...r.graphNodes.values(),...i.graphNodes.values()],h=U(c,Ue(l=>l.id===l.portId),Po(l=>[l.id,a(l.id)]));function p(l){return h[l]??=U(o.children(l)??[],Ue(u=>!u.endsWith(Re)),G(u=>p(u)),Ao(u=>{je(u.length>0,`Node ${l} has no nested nodes`)}),Mo((u,g)=>({minY:Math.min(u.minY,g.position.y),maxY:Math.max(u.maxY,g.position.y+g.height)}),{minY:1/0,maxY:-1/0}),({minY:u,maxY:g})=>{const{position:{x:y},width:B}=a(l);return u=u-S.compound.paddingTop,g=g+S.compound.paddingBottom,{position:{x:y,y:u},width:B,height:g-u}})}function d(l){const u=o.parent(l);return u?d(u)+1:0}function m(l){const u=o.children(l)??[];return u.length===0?0:1+Math.max(...u.map(m))}let j=0,P=0;const C=c.map(({id:l})=>{const{element:u}=o.node(l);let{position:g,width:y,height:B}=p(l);const ge=o.parent(l),ee=(o.children(l)??[]).filter(Ft=>!Ft.endsWith(Re));j=Math.min(j,g.x),P=Math.min(P,g.y);const te=u.defaultView?.id??null,{icon:L,shape:Nt,color:Mt,...At}=u.style;return Qo({id:l,parent:ge??null,x:g.x,y:g.y,title:u.title,description:u.description.$source,technology:u.technology,tags:u.tags,links:null,color:Mt,shape:Nt,icon:L,modelRef:u.id,kind:u.kind,level:d(l),labelBBox:{x:g.x,y:g.y,width:y,height:B},style:At,navigateTo:te,inEdges:[],outEdges:[],...ee.length>0&&{depth:m(l)},children:ee,width:y,height:B})});return{bounds:{x:j,y:P,width:o.graph().width??100,height:o.graph().height??100},nodes:C,edges:o.edges().map(l=>{const u=o.edge(l),g=l.name;je(g,"Edge has no name");const{name:y,source:B,target:ge,relations:ee}=st(s,L=>L.name===g),te=u.points.map(L=>[L.x,L.y]);return je(Co(te,1),`Edge ${y} has less than 2 points`),{id:y,source:B,target:ge,label:null,relations:ee.map(L=>L.id),parent:null,points:te,color:"gray",line:"dashed"}})}}function mr(t){const o=useLikeC4Model();return x.useMemo(()=>({id:`relationships-${t}`,title:`Relationships of ${t}`,description:null,autoLayout:{direction:"LR"},tags:null,links:null,hash:"empty",customColorDefinitions:{},...pr(qe(t,o,null))}),[o,t,qe])}const St=f("/_single/relationships/$fqn")({component:gr});function gr(){const{fqn:t}=St.useParams();return mr(t),e.jsx(e.Fragment,{children:e.jsx(w,{className:ce})})}async function xr({pngFilename:t,viewport:o}){try{const i=await Vo(o,{backgroundColor:"transparent",cacheBust:!0,imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});if(!i)throw new Error("Failed to create PNG blob");var n=URL.createObjectURL(i),r=document.createElement("a");r.setAttribute("download",`${t}.png`),r.href=n,document.body.appendChild(r),r.click(),await new Promise(s=>setTimeout(s,1e3)),document.body.removeChild(r),URL.revokeObjectURL(n),window.close()}catch(i){console.error(i),window.alert("Failed to export to PNG, check the console for more details.")}}function Vt(){const{padding:t=20,download:o=!1,dynamic:n}=Te({strict:!1}),r=W(),i=x.useRef(null),s=x.useRef(null),a=x.useRef(!1);ft();const c=wo(()=>{const j=i.current;if(!o||!j||!r||a.current)return;const P=s.current;P&&(P.style.display="none"),a.current=!0,xr({pngFilename:r.id,viewport:j})},[r],500);if(!r)return e.jsx("div",{children:"Loading..."});const h=dt(r,n),p=16,d=h.width+t*2+p,m=h.height+t*2+p;return e.jsxs(Le,{ref:i,"data-testid":"export-page",css:{position:"fixed",top:"0",left:"0",padding:"0",margin:"0",background:"transparent",overflow:"hidden",zIndex:2},style:{marginRight:"auto",marginBottom:"auto",minWidth:d,width:d,minHeight:m,height:m},children:[o&&e.jsx(fo,{ref:s,visible:!0}),e.jsx(_e,{view:r,fitView:!1,fitViewPadding:{top:"0px",bottom:"0px",left:"0px",right:"0px"},background:"transparent",reduceGraphics:!1,dynamicViewVariant:n,readonly:!0,className:"likec4-static-view",pannable:!1,zoomable:!1,controls:!1,showNotations:!1,enableElementDetails:!1,enableRelationshipDetails:!1,enableRelationshipBrowser:!1,enableDynamicViewWalkthrough:!1,enableFocusMode:!1,enableSearch:!1,nodesSelectable:!1,nodesDraggable:!1,enableElementTags:!1,onInitialized:()=>{if(!i.current){console.error("viewportRef.current is null");return}[...i.current.querySelectorAll(".react-flow__viewport")].forEach(j=>{j.style.transform="translate("+t+"px, "+t+"px)"}),o&&c()}})]})}const jr=t=>{if(typeof t=="boolean")return t;if(typeof t=="string")return t==="true"},wr=f("/_single/export/$viewId")({component:Vt,validateSearch:t=>({download:jr(t.download)})});function Tt(){const{padding:t=20,dynamic:o}=Te({strict:!1}),n=W();if(ft(!!n),!n)return e.jsx("div",{children:"Loading..."});const r=dt(n,o);return e.jsx("div",{style:{position:"absolute",top:0,left:"50%",boxSizing:"border-box",padding:t,transform:"translateX(-50%)",aspectRatio:`${r.width+t*2} / ${r.height+t*2}`,width:"100vw",maxWidth:r.width+t*2,height:"auto",maxHeight:"100vh"},children:e.jsx(Ee,{view:n,fitView:!0,background:"transparent",fitViewPadding:0,dynamicViewVariant:o,initialWidth:r.width,initialHeight:r.height})})}const fr=f("/_single/embed/$viewId")({component:Tt});function Et(){const t=Se(),o=W(),n=ct(),{dynamic:r}=Te({from:"__root__"}),i=Ve(h=>{t({to:"./",viewTransition:!1,params:p=>({...p,viewId:h}),search:!0})}),s=o?o.title??o.id:"View not found",a=n.project.title??ze;if(ke(`${s} - ${a}`),!o)return e.jsx(Me,{});const c=(o.notation?.nodes??[]).length>0;return e.jsx(_e,{view:o,readonly:!0,zoomable:!0,pannable:!0,controls:!0,fitViewPadding:{top:"70px",bottom:"32px",left:"32px",right:"32px"},showNavigationButtons:!0,enableSearch:!0,enableFocusMode:!0,enableDynamicViewWalkthrough:!0,dynamicViewVariant:r,enableElementDetails:!0,enableRelationshipDetails:!0,enableRelationshipBrowser:!0,enableElementTags:!0,experimentalEdgeEditing:!1,showNotations:c,nodesDraggable:!1,nodesSelectable:!0,onNavigateTo:i,onBurgerMenuClick:()=>{t({to:"/"})},children:e.jsx(vr,{})})}function vr(){const t=N(),o=Xo(n=>n.dynamicViewVariant);return De(()=>{(t.latestLocation.search.dynamic??"diagram")!==o&&t.buildAndCommitLocation({search:n=>({...n,dynamic:o}),viewTransition:!1})},[o]),null}const br=f("/_single/view/$viewId/")({component:Et}),yr=f("/project/$projectId/view/$viewId")({component:Ir});function Ir(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(Pt,{}),e.jsx($t,{})]})}const Rr=t=>{if(typeof t=="boolean")return t;if(typeof t=="string")return t==="true"},$r=f("/project/$projectId/export/$viewId")({component:Vt,validateSearch:t=>({download:Rr(t.download)})}),kr=f("/project/$projectId/embed/$viewId")({component:Tt});function Pr({text:t}){return e.jsx(oe,{value:t,timeout:2e3,children:({copied:o,copy:n})=>e.jsx(To,{label:o?"Copied":"Copy",withArrow:!0,position:"right",children:e.jsx(le,{color:o?"teal":"gray",variant:o?"light":"subtle",onClick:n,children:o?e.jsx(ht,{style:{width:T(16)}}):e.jsx(pt,{style:{width:T(16)}})})})})}function ue({text:t}){return e.jsx(w,{pos:"absolute",top:"0",right:"0",p:"4",children:e.jsx(Pr,{text:t})})}const he=b({height:"100%","& .mantine-ScrollArea-viewport":{minHeight:"100%"},"& .mantine-ScrollArea-viewport > div":{minHeight:"100%",height:"100%"}}),pe=b({minHeight:"100%"}),me=b({paddingTop:"[var(--header-height)]"}),Lt=f("/_single/view/$viewId/puml")({component:Sr,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadPumlSources:i}=await M(async()=>{const{loadPumlSources:s}=await import("./puml-CC0YRZHH.js");return{loadPumlSources:s}},__vite__mapDeps([3,1,4,5,6]));try{const{pumlSource:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),Cr=async t=>await(await fetch(dn,{method:"POST",cache:"force-cache",body:JSON.stringify({diagram_source:t,output_format:"svg"}),headers:{"Content-Type":"application/json"}})).text();function Sr(){const{source:t}=Lt.useLoaderData(),[o,{execute:n}]=Ce(Cr,null);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:me,direction:"horizontal",autoSaveId:"viewAsPuml",children:[e.jsx(_,{children:e.jsxs(E,{className:he,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:pe,children:t}),e.jsx(ue,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(_,{children:e.jsxs(E,{h:"100%",children:[o.status!=="success"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{mt:"xs",variant:"light",disabled:o.status==="loading",onClick:()=>void n(t),children:o.status==="loading"?"Loading...":"Render with Kroki"}),o.status==="error"&&e.jsx(w,{children:o.error?.message})]}),o.status==="success"&&e.jsx(w,{className:de,children:o.result?e.jsx("div",{dangerouslySetInnerHTML:{__html:o.result}}):e.jsx(w,{children:"Empty result"})})]})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const $e=f("/_single/view/$viewId/mmd")({component:Tr,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadMmdSources:i}=await M(async()=>{const{loadMmdSources:s}=await import("./mmd-CbZdJn7r.js");return{loadMmdSources:s}},__vite__mapDeps([7,1,4,5,6]));try{const{mmdSource:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),Vr=async(t,o)=>{const{default:n}=await M(async()=>{const{default:i}=await import("https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs");return{default:i}},[]);n.initialize({theme:"dark"});const{svg:r}=await n.render(t,o);return r};function Tr(){const{viewId:t}=$e.useParams(),{source:o}=$e.useLoaderData(),[n,{execute:r}]=Ce(Vr,null);return x.useEffect(()=>{r(t,o)},[o]),e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:me,direction:"horizontal",autoSaveId:"viewAsMmd",children:[e.jsx(_,{children:e.jsxs(E,{className:he,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:pe,children:o}),e.jsx(ue,{text:o})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(_,{children:e.jsx(E,{h:"100%",children:n.result&&e.jsx("div",{className:de,dangerouslySetInnerHTML:{__html:n.result}})})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}function Dt(){const t=N(),o=W(),n=Ve(i=>{const s=t.buildLocation({to:".",params:a=>({...a,viewId:i}),search:!0});t.commitLocation(s)});if(!o)return e.jsx(Me,{});const r=(o.notation?.nodes??[]).length>0;return e.jsx(_e,{view:o,readonly:!1,zoomable:!0,pannable:!0,controls:!0,nodesDraggable:!0,experimentalEdgeEditing:!0,fitViewPadding:{top:"70px",bottom:"32px",left:"50px",right:"32px"},showNavigationButtons:!0,showNotations:r,enableSearch:!0,enableDynamicViewWalkthrough:!0,enableFocusMode:!0,enableElementDetails:!0,enableRelationshipDetails:!0,enableRelationshipBrowser:!0,enableElementTags:!0,onNavigateTo:n,onChange:i=>console.log(i),onBurgerMenuClick:()=>{t.navigate({to:"/"})}})}const Er=f("/_single/view/$viewId/editor")({component:Dt}),_t=f("/_single/view/$viewId/dot")({component:Lr,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadDotSources:i}=await M(async()=>{const{loadDotSources:s}=await import("./dot-BZ0cROQk.js");return{loadDotSources:s}},__vite__mapDeps([8,1,4,5,6]));try{const{dotSource:s,svgSource:a}=await i(n),c=s(r),h=a(r);return{dot:c,dotSvg:h}}catch(s){throw console.error(s),J()}}});function Lr(){const{dot:t,dotSvg:o}=_t.useLoaderData();return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:me,direction:"horizontal",autoSaveId:"viewAsDot",children:[e.jsx(_,{children:e.jsxs(E,{className:he,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:pe,children:t}),e.jsx(ue,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(_,{children:e.jsx(E,{h:"100%",children:e.jsx("div",{className:de,dangerouslySetInnerHTML:{__html:o}})})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const zt=f("/_single/view/$viewId/d2")({component:_r,staleTime:1/0,loader:async({context:t,params:o})=>{const n=t.projectId,{viewId:r}=o,{loadD2Sources:i}=await M(async()=>{const{loadD2Sources:s}=await import("./d2-DIrlb8bs.js");return{loadD2Sources:s}},__vite__mapDeps([9,1,4,5,6]));try{const{d2Source:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),Dr=async t=>await(await fetch(cn,{method:"POST",cache:"force-cache",body:JSON.stringify({diagram_source:t,output_format:"svg"}),headers:{"Content-Type":"application/json"}})).text();function _r(){const{source:t}=zt.useLoaderData(),[o,{execute:n}]=Ce(Dr,null);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:me,direction:"horizontal",autoSaveId:"viewAsD2",children:[e.jsx(_,{children:e.jsxs(E,{className:he,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:pe,children:t}),e.jsx(ue,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(_,{children:e.jsxs(E,{h:"100%",children:[o.status!=="success"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{mt:"xs",variant:"light",disabled:o.status==="loading",onClick:()=>void n(t),children:o.status==="loading"?"Loading...":"Render with Kroki"}),o.status==="error"&&e.jsx(w,{children:o.error?.message})]}),o.status==="success"&&e.jsx(w,{className:de,children:o.result?e.jsx("div",{dangerouslySetInnerHTML:{__html:o.result}}):e.jsx(w,{children:"Empty result"})})]})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const zr=f("/project/$projectId/view/$viewId/")({component:Et}),Nr=f("/project/$projectId/view/$viewId/editor")({component:Dt}),Mr=Pn.update({id:"/projects",path:"/projects",getParentRoute:()=>O}),A=wt.update({id:"/_single",getParentRoute:()=>O}),Ar=zn.update({id:"/",path:"/",getParentRoute:()=>O}),Fr=Fn.update({id:"/single-index",path:"/single-index",getParentRoute:()=>A}),Z=bt.update({id:"/project/$projectId",path:"/project/$projectId",getParentRoute:()=>O}),Br=yt.update({id:"/",path:"/",getParentRoute:()=>Z}),Hr=It.update({id:"/webcomponent/$",path:"/webcomponent/$",getParentRoute:()=>A}),F=Ct.update({id:"/view/$viewId",path:"/view/$viewId",getParentRoute:()=>A}),Or=St.update({id:"/relationships/$fqn",path:"/relationships/$fqn",getParentRoute:()=>A}),Wr=wr.update({id:"/export/$viewId",path:"/export/$viewId",getParentRoute:()=>A}),Ur=fr.update({id:"/embed/$viewId",path:"/embed/$viewId",getParentRoute:()=>A}),Gr=br.update({id:"/",path:"/",getParentRoute:()=>F}),Fe=yr.update({id:"/view/$viewId",path:"/view/$viewId",getParentRoute:()=>Z}),qr=$r.update({id:"/export/$viewId",path:"/export/$viewId",getParentRoute:()=>Z}),Kr=kr.update({id:"/embed/$viewId",path:"/embed/$viewId",getParentRoute:()=>Z}),Yr=Lt.update({id:"/puml",path:"/puml",getParentRoute:()=>F}),Jr=$e.update({id:"/mmd",path:"/mmd",getParentRoute:()=>F}),Qr=Er.update({id:"/editor",path:"/editor",getParentRoute:()=>F}),Xr=_t.update({id:"/dot",path:"/dot",getParentRoute:()=>F}),Zr=zt.update({id:"/d2",path:"/d2",getParentRoute:()=>F}),es=zr.update({id:"/",path:"/",getParentRoute:()=>Fe}),ts=Nr.update({id:"/editor",path:"/editor",getParentRoute:()=>Fe}),os={SingleViewViewIdD2Route:Zr,SingleViewViewIdDotRoute:Xr,SingleViewViewIdEditorRoute:Qr,SingleViewViewIdMmdRoute:Jr,SingleViewViewIdPumlRoute:Yr,SingleViewViewIdIndexRoute:Gr},ns=F._addFileChildren(os),rs={SingleSingleIndexRoute:Fr,SingleEmbedViewIdRoute:Ur,SingleExportViewIdRoute:Wr,SingleRelationshipsFqnRoute:Or,SingleViewViewIdRoute:ns,SingleWebcomponentSplatRoute:Hr},ss=A._addFileChildren(rs),is={ProjectProjectIdViewViewIdEditorRoute:ts,ProjectProjectIdViewViewIdIndexRoute:es},as=Fe._addFileChildren(is),ls={ProjectProjectIdIndexRoute:Br,ProjectProjectIdEmbedViewIdRoute:Kr,ProjectProjectIdExportViewIdRoute:qr,ProjectProjectIdViewViewIdRoute:as},ds=Z._addFileChildren(ls),cs={IndexRoute:Ar,SingleRouteRoute:ss,ProjectsRoute:Mr,ProjectProjectIdRouteRoute:ds},us=O._addFileChildren(cs)._addFileTypes();function hs(){return Eo({routeTree:us,context:{projectId:ye.length>0?ye[0].id:"default"},basepath:un,trailingSlash:"always",defaultViewTransition:!0,history:Lo(),defaultStaleTime:1/0,scrollRestoration:!1,defaultStructuralSharing:!0,defaultNotFoundComponent:()=>e.jsx(Me,{}),defaultErrorComponent:({error:t,reset:o})=>e.jsx(Ne,{error:t,resetErrorBoundary:o})})}function ps(){const t=x.useMemo(()=>hs(),[]);return e.jsx(vo,{router:t})}const ms=ro({autoContrast:!0,primaryColor:"indigo",cursorType:"pointer",fontFamily:"var(--likec4-app-font)",headings:{fontWeight:"500",sizes:{h1:{fontWeight:"600"},h2:{}}},components:{Portal:so.extend({defaultProps:{reuseTargetNode:!0}})}});Bt.createRoot(document.getElementById("likec4-root")).render(e.jsx(x.StrictMode,{children:e.jsx(io,{theme:ms,defaultColorScheme:"auto",children:e.jsx(ps,{})})}));export{M as _};
